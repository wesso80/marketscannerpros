import React from 'react';
import { SafeAreaView } from 'react-native';
import { WebView } from 'react-native-webview';
import { StatusBar } from 'expo-status-bar';

const TARGET_URL = 'https://market-scanner-1-wesso80.replit.app?mobile=true';

// JS that runs inside the page
const INJECT = `
(function () {
  // Tell the engine we support dark controls/scrollbars
  document.documentElement.style.colorScheme = 'dark';

  // Ensure dark background & text even if site CSS is late/missing
  var style = document.createElement('style');
  style.textContent = 'html,body{background:#000!important;color:#fff!important} .card,.panel,.container,.section{background:#1b1c21!important;color:#fff!important}';
  document.head.appendChild(style);
})();
true; // <- required so WebView knows the script finished
`;

export default function App() {
  return (
    <SafeAreaView style={{ flex: 1, backgroundColor: '#000' }}>
      <StatusBar style="light" />
      <WebView
        source={{ uri: TARGET_URL }}
        style={{ flex: 1, backgroundColor: '#000' }}   // native view bg
        containerStyle={{ backgroundColor: '#000' }}
        javaScriptEnabled
        domStorageEnabled
        startInLoadingState
        allowsBackForwardNavigationGestures
        // âœ… key line:
        injectedJavaScript={INJECT}
      />
    </SafeAreaView>
  );
}
